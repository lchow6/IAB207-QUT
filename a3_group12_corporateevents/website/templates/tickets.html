{% extends 'base.html' %}
{% block content %}

<div class="container my-5">
  <h2 class="text-center fw-bold mb-4">Your Tickets</h2>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 justify-content-center">
    {% for group in ticket_groups %}
      <div class="col">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-header bg-light d-flex justify-content-between align-items-center">
            <span class="fw-bold text-uppercase">{{ group.ticket_type }}</span>
            <span class="badge bg-{{ 'success' if group.event.status == 'Open' else 'secondary' }}">{{ group.event.status }}</span>
          </div>
          <div class="card-body">
            <h5 class="card-title">{{ group.event.event_name }}</h5>
            <p><strong>Event Type:</strong> {{ group.event.event_type }}</p>
            <p><strong>Seat:</strong> General Admission</p>
            <p><strong>Price:</strong> ${{ "%.2f"|format(group.price) }}</p>
            <p><strong>Quantity:</strong> {{ group.quantity }} ticket{{ 's' if group.quantity > 1 }}</p>
            <p><strong>Tickets Sold:</strong> {{ group.event.tickets_sold() }}</p>



            {% if group.tickets %}
              <p><strong>Attendees:</strong></p>
              <ul class="ps-3 mb-2">
                {% for ticket in group.tickets %}
                  <li>{{ ticket.attendee_name }}</li>
                {% endfor %}
              </ul>
            {% endif %}

            <p><strong>Date:</strong> {{ group.event.checkin_date.strftime('%B %d, %Y') }}</p>
            <p><strong>Time:</strong> {{ group.event.checkin_time.strftime('%I:%M %p') }}</p>
            <a href="{{ url_for('main.view_event', event_id=group.event.id) }}" class="btn btn-outline-primary btn-sm">View Event</a>
          </div>
          <div class="card-footer text-muted small">
            Booking ID: {{ group.booking_id }} | Event ID: {{ group.event.id }}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% endblock %}
